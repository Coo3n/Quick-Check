version: "3.9"

services:
  container-back:
    ports:
      - "127.0.0.1:8080:80"
    build:
      dockerfile: Dockerfile
    profiles: ["backend-api", "all"]
    volumes:
      - ./src:/var/app
    env_file: .env

  container-db:
    image: "postgres:14-bullseye"
    ports:
      - "127.0.0.1:5432:5432"
    profiles: ["backend-db", "all"]
    volumes:
      - ./data:/var/lib/postgresql/data
    env_file: .env
